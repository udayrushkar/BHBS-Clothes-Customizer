/* eslint-disable @typescript-eslint/no-unused-vars */
/* eslint-disable @typescript-eslint/no-explicit-any */

import React, { useState, useRef } from "react";
import { Slider } from "./ui/slider";

export default function TShirtDesigner({color1, logos}: any) {
  const [selectedLogoIndex, setSelectedLogoIndex] = useState(0);
  const [sizes, setSizes] = useState([100, 100, 100]);
  const [positions, setPositions] = useState<{ x: number; y: number }[]>([{x:0,y:0},{x:0,y:0},{x:0,y:0}]);
  const [isDragging, setIsDragging] = useState(false);
  const [dragOffset, setDragOffset] = useState({ x: 0, y: 0 });
  
  const [color2, setColor2] = useState("#000000");

  const fileInputRefs = [useRef(null), useRef(null), useRef(null)];
  const canvasRef = useRef(null);

  // Check if a click is on a specific logo
  const getClickedLogoIndex = (e: any) => {
    const rect = e.currentTarget.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    // Check each logo in reverse order (top to bottom in z-index)
    for (let i = logos.length - 1; i >= 0; i--) {
      if (!logos[i]) continue;
      
      const logoRect = {
        x: 200 + positions[i].x - sizes[i] / 2,
        y: 250 + positions[i].y - sizes[i] / 2,
        width: sizes[i],
        height: sizes[i],
      };

      if (
        mouseX >= logoRect.x &&
        mouseX <= logoRect.x + logoRect.width &&
        mouseY >= logoRect.y &&
        mouseY <= logoRect.y + logoRect.height
      ) {
        return i;
      }
    }
    return -1;
  };

  const handleMouseDown = (e: any) => {
    const clickedLogoIndex = getClickedLogoIndex(e);
    
    if (clickedLogoIndex !== -1) {
      // Select the clicked logo
      setSelectedLogoIndex(clickedLogoIndex);
      
      // Start dragging
      setIsDragging(true);
      const rect = e.currentTarget.getBoundingClientRect();
      const mouseX = e.clientX - rect.left;
      const mouseY = e.clientY - rect.top;

      setDragOffset({
        x: mouseX - (200 + positions[clickedLogoIndex].x),
        y: mouseY - (250 + positions[clickedLogoIndex].y),
      });
    } else {
      // Clicked outside any logo - deselect
      setSelectedLogoIndex(-1);
    }
  };

  const handleMouseMove = (e: any) => {
    if (!isDragging || selectedLogoIndex === -1 || !logos[selectedLogoIndex]) return;

    const rect = e.currentTarget.getBoundingClientRect();
    const mouseX = e.clientX - rect.left;
    const mouseY = e.clientY - rect.top;

    const newPositions = [...positions];
    newPositions[selectedLogoIndex] = {
      x: mouseX - 200 - dragOffset.x,
      y: mouseY - 250 - dragOffset.y,
    };
    setPositions(newPositions);
  };

  const handleMouseUp = () => {
    setIsDragging(false);
  };

  // Handle wheel scrolling for resizing
  const handleWheel = (e: any) => {
    e.preventDefault();
    
    const clickedLogoIndex = getClickedLogoIndex(e);
    if (clickedLogoIndex === -1) return;

    const delta = e.deltaY > 0 ? -5 : 5; // Scroll down = smaller, scroll up = bigger
    const newSizes = [...sizes];
    const newSize = Math.max(20, Math.min(200, sizes[clickedLogoIndex] + delta));
    newSizes[clickedLogoIndex] = newSize;
    setSizes(newSizes);
    
    // Also select the logo being resized
    setSelectedLogoIndex(clickedLogoIndex);
  };

  console.log("logos", logos);
  
  const resetPosition = () => {
    if (selectedLogoIndex === -1) return;
    
    const newPositions = [...positions];
    const newSizes = [...sizes];
    newPositions[selectedLogoIndex] = { x: 0, y: 0 };
    newSizes[selectedLogoIndex] = 100;
    setPositions(newPositions);
    setSizes(newSizes);
  };

  const handleSizeChange = (value) => {
    console.log("sizeChnage called")
    
  
    // Ensure a logo is selected
    if (selectedLogoIndex === -1) return;
  
    const newSize = +value;
  
    // Update sizes array with new value
    setSizes(prevSizes => {
      const updatedSizes = [...prevSizes];
      updatedSizes[selectedLogoIndex] = newSize;
      return updatedSizes;
    });
  };

  return (
    <>
      <div className="bg-gradient-to-br w-full">
        <div className="max-w-4xl mx-auto">
          <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div className="lg:col-span-3">
              <div className="">
                <div className="flex justify-center">
                  <div
                    className="relative bg-white overflow-hidden cursor-move select-none"
                    style={{ 
                      width: "1200px",
                      transition: "all 0.1s ease-out" // Smooth transitions
                    }}
                    onMouseDown={handleMouseDown}
                    onMouseMove={handleMouseMove}
                    onMouseUp={handleMouseUp}
                    onMouseLeave={handleMouseUp}
                    onWheel={handleWheel}
                  >
                                                        <svg  viewBox="0 0 1366 1334" className="mb-10 pb-12" style={{height:"350px",margin:"auto"}} fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="1365.33" transform="translate(0 -32)" fill="white" style={{width:"100%",maxWidth:"100%"}}/>
<path d="M257.733 138.533C250.533 140.4 247.333 143.333 233.6 160.933C226.267 170.4 218.8 179.2 217.067 180.8C215.467 182.4 187.2 194.267 154.267 207.333C98.2666 229.467 94.4 231.2 90.6666 236C82.5333 246.267 74.8 267.733 63.4666 312C46.4 378 32.9333 468.667 19.3333 608.667C16.8 634.4 12.5333 693.6 10.6666 727.333C9.86665 741.2 7.99998 772.667 6.53331 796.933C4.93331 821.333 3.99998 842.267 4.53331 843.333C6.79998 849.333 29.0666 853.6 58 853.6C80.9333 853.6 94.2666 851.733 99.2 847.867C102 845.6 102.4 843.867 103.867 824.4C106.933 786.267 122.533 632 128.133 585.333C129.6 573.2 131.333 558.533 132 552.667C132.667 546.8 134.4 533.867 136 524C137.467 514.133 138.8 503.867 138.8 501.333C139.333 490.133 141.2 516.667 142 548.667C143.333 596.933 140.667 651.867 133.333 726C130.4 755.333 125.467 811.467 121.333 860C119.867 877.2 117.867 901.867 116.8 914.667C114.933 936.267 108 1038.13 103.467 1112C101.2 1147.87 100.933 1146.67 112.533 1150C129.067 1154.67 176.4 1161.33 214.667 1164.27C249.467 1166.8 406.533 1166.53 440.667 1163.73C490.267 1159.6 532 1153.47 543.467 1148.67L548.4 1146.67L547.467 1129.6C547.067 1120.27 545.733 1094.4 544.667 1072C542.667 1030.67 540.933 1000 538.667 965.333C538 954.667 537.067 940 536.667 932.667C535.6 914.8 532.4 868.667 530.667 848C525.067 776.933 519.067 710.933 518.133 709.467C515.6 705.467 510.667 593.333 511.467 559.333C511.733 547.6 512 530.533 512.133 521.333C512.267 502.4 513.733 503.2 515.867 523.467C516.667 530.667 518.133 542 519.2 548.667C527.333 598.267 540.667 728.533 546.8 818.4C548.8 846.933 549.333 848.133 560.4 850.667C564.133 851.6 576.667 852.667 588.133 852.933C619.467 854 642.8 850.533 648.8 843.867C651.067 841.333 651.067 839.6 649.6 814.267C648 787.6 644.4 740 640.667 694.667C639.733 681.867 638.4 665.867 638 659.333C636.8 641.067 632.267 591.867 629.333 562.667C611.867 394.4 582.533 262.4 556.133 234.667C549.333 227.467 533.333 220.267 456.133 190C438.267 183.067 425.467 177.2 424 175.467C414.4 164.133 410.533 159.467 404.667 152.133C392.667 137.467 396.133 138 324 137.733C289.867 137.6 260 138 257.733 138.533ZM388.667 144.267C392.667 146 392.8 147.6 390 165.333C388.933 172.267 388 178.4 388 178.933C388 179.6 358.533 180 322.667 180C271.6 180 257.067 179.6 256.667 178.267C256 176.8 252 148.8 252 146.4C252 145.733 253.333 144.667 255.067 144C259.733 142.133 384.4 142.267 388.667 144.267ZM416.8 172.667C422.4 179.333 429.867 193.333 440.8 218.267C448.533 235.867 450.4 241.333 448.8 241.333C448.133 241.333 424.267 247.467 415.067 250.133C411.2 251.2 408 252.8 408 253.733C408 254.8 413.733 261.867 420.8 269.733C433.067 283.467 433.467 284.133 431.6 287.067C429.333 290.4 420 300.667 378 346C361.867 363.333 345.467 381.333 341.467 385.867C337.467 390.267 333.467 394.133 332.533 394.4C329.867 395.067 328.667 388.8 328.8 374.667C328.933 360.267 329.467 358.667 350 308C372.4 252.533 391.6 189.733 394.8 161.333L396.4 148.133L404.267 157.733C408.667 163.067 414.267 169.733 416.8 172.667ZM249.867 164C255.467 201.067 271.467 248.667 300.133 313.333C320.933 360.4 322.667 365.467 322.667 378.8C322.667 386.267 323.2 391.067 324.4 392.267C325.2 393.333 326.667 395.333 327.467 396.667C329.6 400.533 332.8 400.667 336.667 396.8L340 393.467L339.867 411.067C339.867 428 339.733 428.533 337.6 425.333C334.133 420.267 299.067 379.867 284 363.333C260.533 337.867 214.667 284.667 214.667 282.933C214.667 282.4 220.133 276 226.667 268.667C233.333 261.333 238.667 254.667 238.667 253.733C238.667 252.267 236 251.333 222 247.867C205.733 243.867 197.333 240.8 197.333 238.933C197.333 237.867 199.733 231.467 202.533 224.8C205.467 218.133 210.533 206.133 213.867 198.267C218.933 186.267 222.267 180.933 233.467 166.533C240.933 157.067 247.2 149.467 247.467 149.733C247.733 149.867 248.8 156.267 249.867 164ZM386.667 183.733C386.667 186.133 374.4 227.467 368 246.667C361.333 266.4 334.933 333.733 328.933 346.4C327.333 349.733 325.333 352.667 324.533 352.933C322.933 353.467 323.6 354.933 307.333 318.667C285.867 271.333 270.4 230.133 262.133 198.667L257.733 182L322.133 182.4C357.6 182.533 386.667 183.2 386.667 183.733ZM433.6 184.667C436 185.733 456.933 194.133 480 203.2C547.467 230 548.667 230.533 546.533 237.733C545.867 240.133 543.467 251.6 541.2 263.333C539.067 275.067 535.733 292.133 533.867 301.333C526.8 337.6 514.533 433.2 510.667 483.333C508.267 514.533 507.6 573.867 509.2 612C511.067 655.467 514.4 711.733 515.467 714.933C515.867 716.533 515.067 717.333 512.4 717.867C502.8 719.733 456.133 721.6 426 721.2L392.667 720.667L392.267 792.667C391.867 866.933 392.667 882.267 397.067 889.867C400.4 895.733 409.2 899.467 424.267 901.467C440.4 903.467 503.6 902.133 519.333 899.467C525.2 898.4 530.4 898 530.933 898.533C532.267 899.733 538.4 1001.07 543.867 1116.67C544.667 1131.33 544.8 1143.73 544.267 1144.27C542.8 1145.73 525.067 1150.13 511.2 1152.53C477.467 1158.27 418.133 1162.67 372.4 1162.67H344V775.2V387.733L357.067 373.6C364.133 365.867 382.667 346 398 329.6C432.533 292.667 437.333 287.067 437.333 284.267C437.2 283.067 432.667 277.2 427.2 271.333C421.6 265.467 416 259.067 414.667 257.2L412.133 253.867L429.733 249.467C448 244.933 453.333 242.667 453.333 239.333C453.333 238.133 450.933 232 447.867 225.6C444.933 219.2 440.933 210.4 439.067 206C437.2 201.6 434 194.533 431.867 190.267C429.733 186.133 428.267 182.667 428.667 182.667C428.933 182.667 431.2 183.6 433.6 184.667ZM203.867 213.333C195.333 233.067 193.2 239.467 194.267 241.067C195.733 243.6 203.333 246.4 221.467 251.067C228.4 252.933 233.867 254.8 233.6 255.467C233.467 256.133 228.133 262.133 222 268.933C215.733 275.6 210.667 282 210.667 283.2C210.667 284.267 215.333 290.533 221.067 297.067C226.667 303.6 236.4 314.933 242.667 322.133C248.933 329.333 257.333 338.933 261.333 343.333C269.733 352.667 298 384.667 319.6 409.333C327.6 418.533 335.6 428.133 337.333 430.667L340.667 435.333L341.067 799.067L341.467 1162.67L323.733 1162.93C240.533 1164.27 150.533 1157.33 114.4 1146.53L105.333 1143.87V1134.93C105.333 1130 106.267 1112.53 107.333 1096C108.4 1079.47 110.8 1043.2 112.667 1015.33C118.533 924.4 120.4 899.333 121.2 898.533C121.6 898 128.267 898.533 136 899.6C143.867 900.667 167.067 901.867 189.067 902.267C240.4 903.2 248.8 901.733 255.067 890C258 884.667 258 883.733 258.4 802.667L258.8 720.667L215.733 720.533C177.867 720.4 139.467 718.667 137.733 716.933C137.467 716.533 138.8 696.667 140.8 672.533C144 634.267 144.4 621.333 144.533 571.333C144.667 539.733 144.133 509.2 143.6 503.467C143.067 497.733 141.333 480.533 140 465.467C134.8 411.867 127.733 362.4 119.2 320C110.133 274.933 100 236 97.2 236C95.6 236 95.6 238.933 97.4666 243.467C104.667 262.533 119.733 333.6 127.333 384.133C137.733 454 139.867 489.867 134.933 514.267C133.333 522.533 131.067 536.133 130 544.267C127.467 563.2 115.467 674.533 112.667 704.133C111.6 716.267 109.467 737.6 108 751.467C106.533 765.333 104.4 786.533 103.333 798.533C102.133 810.667 100.933 820.8 100.667 821.067C100.4 821.333 89.7333 822 77.0666 822.267C56.5333 822.933 27.2 821.467 12.9333 819.067L7.73331 818.267L8.53331 809.467C9.06665 804.667 10.9333 774.533 12.6666 742.667C18.4 642.133 25.0666 567.867 34.8 493.333C36.2666 482 38 467.867 38.8 462C49.4666 377.2 71.8666 278.533 87.3333 247.867C93.6 235.467 96.5333 233.6 132.933 219.333C151.067 212.133 176.8 202 190 196.667C203.2 191.333 214.133 187.067 214.4 187.333C214.667 187.467 209.867 199.2 203.867 213.333ZM563.467 251.6C570.533 264.133 585.867 311.6 591.2 337.6C592.267 342.933 595.333 357.467 598 370C606.667 411.333 614.933 463.2 620.667 512.667C621.733 522.133 623.6 537.733 624.667 547.333C628.533 580.267 636.667 676 644 775.867C647.2 820.133 647.2 818.267 644.4 819.2C638.8 820.8 611.867 822 583.6 821.867C559.333 821.733 552.8 821.333 551.467 819.867C550.4 818.667 549.2 810 548.133 796.667C544.533 747.333 535.467 652.667 530 605.067C526 570.133 516.933 509.6 514.533 500.4C512.8 493.867 514.267 471.067 519.467 424.667C525.867 366.667 531.2 330.933 541.467 277.733C545.333 258 548.667 239.867 549.067 237.333L549.733 232.667L554.267 238C556.8 240.933 560.933 247.067 563.467 251.6ZM324.267 358.933C323.333 359.867 322.667 360 322.667 359.2C322.667 357.333 324.267 355.733 325.2 356.667C325.467 357.067 325.067 358.133 324.267 358.933ZM327.6 361.6C327.2 362.667 326.8 362.267 326.8 360.8C326.667 359.333 327.067 358.533 327.467 359.067C327.867 359.467 328 360.667 327.6 361.6ZM519.733 752.667C521.333 769.467 523.2 790.8 524 800C527.867 846.8 529.333 866 530.133 880L531.067 895.333L527.867 895.467C526.133 895.467 518.4 896.4 510.667 897.333C491.6 899.867 433.733 900 418.8 897.467C406 895.333 399.867 891.2 397.2 882.933C396.133 879.6 395.467 857.467 395.067 813.867L394.4 749.733L445.6 748.8C503.067 747.867 520.4 746.533 517.067 743.333C516.8 742.933 508.133 743.333 497.867 744.133C487.733 744.933 460.4 745.733 437.333 745.867L395.333 746L394.933 738.667C394.667 734.667 394.8 729.467 395.2 727.333L396 723.333L446.267 723.2C474 723.067 500.933 722.4 506 721.733C511.2 721.067 515.733 720.8 516.133 721.2C516.533 721.6 518.133 735.733 519.733 752.667ZM209.067 723.467L256 724.4V735.467V746.667H235.067C211.333 746.667 143.733 744.267 138.8 743.333C137.067 743.067 135.333 742.533 135.067 742.133C134.8 741.867 134.933 736.933 135.467 731.333L136.4 720.933L149.2 721.867C156.267 722.267 183.2 723.067 209.067 723.467ZM201.067 748.8L256 749.733V813.333C256 885.867 255.733 888.133 246.933 894C239.067 899.2 226.4 900.4 189.333 899.6C161.2 898.933 123.467 896 121.733 894.267C121.467 893.867 122.133 883.467 123.2 871.2C124.267 858.8 127.2 825.733 129.6 797.6L134 746.4L140 747.2C143.333 747.6 170.8 748.267 201.067 748.8ZM647.333 825.733C647.867 828.133 648 832.8 647.733 836C647.333 841.867 647.2 842 640 844.933C620.933 852.4 561.733 851.6 553.867 843.733C552.8 842.667 551.6 837.867 551.2 833.2L550.267 824.4L584.133 824.933C615.067 825.467 625.467 824.8 645.6 821.467C646.133 821.467 646.933 823.333 647.333 825.733ZM65.7333 824.667H100V833.333C100 838.133 99.4666 842.667 98.9333 843.6C93.7333 851.733 39.7333 853.067 15.2 845.6L7.33331 843.2L6.93331 837.333C6.66665 834 6.79998 829.333 7.33331 826.933L8.13331 822.4L19.7333 823.6C26.1333 824.133 46.8 824.667 65.7333 824.667Z" fill="black"/>
<path d="M318.267 191.6C316.8 193.067 317.2 334.667 318.667 334.667C319.467 334.667 320.133 309.467 320.4 263.6L320.667 192.667L321.067 269.6C321.2 321.867 321.733 346.667 322.667 346.667C323.6 346.667 324 327.6 323.733 286.933C323.333 205.733 322.933 190.667 320.8 190.667C319.867 190.667 318.667 191.067 318.267 191.6Z" fill="black"/>
<path d="M434.667 382.667L378 383.333L378.133 434.667C378.133 493.733 378.667 497.867 387.733 505.333C394.933 511.333 403.467 513.333 425.333 514.267C447.067 515.2 463.733 513.333 473.333 509.2C480.667 505.867 483.6 503.333 486.8 497.2C491.333 488.267 492.133 477.067 491.733 428.667L491.333 382L434.667 382.667ZM489.067 396.533C489.467 405.733 489.2 406.933 487.333 406.133C486.133 405.733 461.733 405.333 433.2 405.333H381.333V395.333V385.333L435.067 385.6L488.667 386L489.067 396.533ZM489.067 446.933C488.533 478.267 488 485.733 486.133 490.8C483.333 498.4 477.067 504.533 469.467 507.333C455.867 512.133 420.8 513.067 404 509.067C396.4 507.2 389.333 503.333 386.267 499.333C382.267 493.867 381.333 483.6 381.333 445.867V409.333H435.467H489.6L489.067 446.933Z" fill="black"/>
<path d="M314 444.667C307.467 451.067 311.6 461.333 320.667 461.333C330 461.333 334.4 449.733 327.2 444.133C322.533 440.4 318 440.667 314 444.667ZM325.867 448.267C328.533 452.133 328.533 452.8 325.333 456C321.733 459.6 317.867 459.333 315.2 455.333C313.2 452.267 313.2 451.733 315.2 448.667C318 444.4 323.067 444.267 325.867 448.267Z" fill="black"/>
<path d="M313.333 589.333C309.733 592.933 310 598.133 314 602C321.067 609.067 330.667 603.733 329.467 593.333C328.667 587.2 318 584.667 313.333 589.333ZM324.267 591.6C327.333 594.4 327.333 597.6 324.133 600.533C320.267 604.133 314.667 601.067 314.667 595.2C314.667 589.6 319.867 587.6 324.267 591.6Z" fill="black"/>
<path d="M312.933 737.067C305.067 745.733 318.533 758.8 326.667 750.667C330.133 747.2 330.133 739.867 326.933 736.933C323.6 733.867 315.6 734 312.933 737.067ZM324.4 739.2C327.6 741.733 327.2 746.267 323.467 748.667C319.733 751.2 316.267 750 314.533 745.733C312 739.067 318.533 734.8 324.4 739.2Z" fill="black"/>
<path d="M304.754 937.723C297.954 940.256 295.687 949.056 300.754 954.123C304.221 957.59 311.554 957.59 314.754 954.123C318.487 949.99 317.954 943.59 313.554 939.856C309.954 936.79 308.354 936.39 304.754 937.723ZM312.621 942.656C317.687 948.79 309.287 957.456 303.421 952.123C300.221 949.19 300.087 946.523 303.021 943.19C305.554 940.256 310.487 939.99 312.621 942.656Z" fill="black"/>
<path d="M982.4 140C976.533 140.533 970.533 142 968.533 143.333C966.667 144.533 955.867 154.533 944.667 165.467C924.667 185.067 924.267 185.333 912.533 189.733C865.067 207.733 823.333 224.667 814.533 229.6C790.933 242.8 766.4 328.4 746.8 466C740.8 507.467 735.067 553.733 732.667 578.667C731.6 590.8 730.4 603.333 730 606.667C729.733 610 728.8 621.6 728 632.667C727.2 643.6 726 659.867 725.2 668.667C724.533 677.467 722.8 702.933 721.333 725.333C719.867 747.733 717.467 782.933 715.867 803.733C713.2 839.333 713.2 841.6 715.333 844C721.2 850.533 743.333 853.867 774.533 853.067C800.133 852.267 811.467 849.733 814.267 844C815.067 842.133 816.533 829.2 817.333 815.333C819.067 785.6 823.733 722.667 824.667 716C825.067 713.467 826.267 699.867 827.333 686C829.467 660.8 835.333 600.8 839.333 564C840.533 553.333 842.267 536.267 843.333 526.133C844.4 516 845.867 506.933 846.667 506.133C847.333 505.467 848.133 503.6 848.267 502.133C848.4 500.533 848.933 512.8 849.467 529.333C850.533 566 848.933 625.867 845.333 679.333C840.533 752.4 837.333 797.6 834.667 832C833.2 850.667 829.867 895.733 827.333 932C824.8 968.267 822.133 1006.4 821.333 1016.67C818.267 1059.2 813.333 1145.6 814 1146.67C816 1149.87 849.733 1156.67 885.333 1161.2C929.733 1166.8 1048.13 1169.73 1110 1166.8C1182.13 1163.33 1254.4 1153.6 1260.8 1146.53C1262.93 1144.13 1262.93 1142 1261.47 1114.27C1256.67 1026.27 1249.33 914.533 1245.33 870C1243.87 853.467 1239.87 797.867 1233.33 704.667C1228.4 633.467 1224.8 554.267 1225.87 539.867C1226.27 535.2 1226.93 521.067 1227.33 508.667C1229.73 438.4 1243.2 341.2 1258.93 281.333C1262.67 267.067 1266.53 251.733 1267.6 247.333C1270.8 234.533 1270.4 234.8 1274.8 240C1286.27 253.467 1301.47 301.067 1312.53 358C1329.07 442.133 1340.67 544.133 1351.33 699.333C1353.73 733.6 1357.6 786.933 1358.67 801.2C1359.47 810.4 1359.6 818.267 1359.07 818.8C1356.8 821.067 1321.33 822.933 1297.07 822.133C1271.2 821.2 1266.8 820.8 1265.2 819.067C1264.67 818.4 1263.33 806 1262.13 791.333C1259.47 758.933 1252.53 680.4 1250.67 662C1250 654.667 1248.13 635.733 1246.67 620C1245.2 604.267 1243.73 588.667 1243.33 585.333C1242.53 579.2 1242.27 577.467 1236.8 542.667C1234.93 531.333 1233.07 518.133 1232.53 513.333C1231.47 502.4 1229.47 498.267 1229.33 506.667C1229.33 512.133 1236.67 566 1238 570.667C1239.2 574.533 1246.93 650.8 1253.33 721.333C1256.27 754.533 1257.73 770.8 1260.8 809.333C1261.87 823.6 1263.2 837.6 1263.6 840.267C1265.07 849.733 1271.33 852.133 1297.07 852.933C1332.13 854.267 1361.33 848 1363.6 838.8C1364.13 836.933 1362.8 815.2 1360.93 790.667C1358.93 766.133 1355.87 724.133 1354 697.333C1350.67 647.6 1349.47 632.933 1345.87 592C1344.8 579.2 1343.33 561.733 1342.53 553.333C1341.87 544.933 1340.4 530.133 1339.2 520.667C1338.13 511.067 1336 493.467 1334.67 481.333C1320.67 361.6 1298.4 266.4 1277.6 237.867C1272.8 231.333 1266.4 228 1236.67 216.933C1172.53 192.8 1152.4 185.067 1147.87 182.267C1145.2 180.667 1134.53 171.2 1124.27 161.2C1109.33 146.8 1104.4 142.667 1099.87 141.333C1093.07 139.333 999.333 138.267 982.4 140ZM1078 142.667C1087.6 143.333 1096.67 144.267 1098.4 144.533C1103.07 145.6 1107.47 149.2 1124 166C1138.67 180.933 1139.2 181.6 1134.67 180.8C1124.93 179.2 1094 177.333 1059.33 176.533C1016.8 175.467 976.933 177.2 937.333 182C932.933 182.533 933.467 181.733 951.467 164.133C965.467 150.4 971.6 145.333 974.8 144.667C988.667 141.6 1047.07 140.4 1078 142.667ZM1126.67 183.2C1135.07 184.267 1144.67 186 1148 187.067C1155.47 189.6 1216.13 212.667 1245.07 224C1270 234 1268.67 231.867 1263.33 251.333C1252 292.533 1245.33 323.867 1239.33 362.933C1229.87 426 1222.67 503.467 1222.67 542.267C1222.67 576.533 1227.07 658.267 1234 753.333C1235.07 768.4 1236.93 794.4 1238 811.333C1239.2 828.133 1241.2 856.133 1242.67 873.333C1250 960.667 1260.93 1142.27 1259.07 1144.13C1256.13 1147.07 1223.87 1153.2 1194 1156.67C1157.33 1160.8 1129.33 1162.67 1082 1164.27C985.467 1167.47 867.6 1159.6 824.133 1147.2L816.933 1145.2L817.867 1123.6C818.4 1111.73 820.533 1074.4 822.667 1040.67C828.8 946.267 830 929.067 837.333 834C838.8 815.6 840.8 786.267 842 768.667C843.2 751.067 844.667 730.4 845.333 722.667C851.067 660.533 854.533 553.333 852.133 512.667C848.133 443.6 837.867 346.533 829.867 301.333C824.8 272.667 818.133 242.267 815.333 235.733C814.667 234.133 815.6 232.933 818.933 231.2C826 227.6 855.067 215.733 895.333 200L932.667 185.467L957.333 183.467C995.067 180.267 994.267 180.267 1054.67 180.8C1093.73 181.067 1116.13 181.867 1126.67 183.2ZM813.067 236.267C813.067 237.2 814.133 241.333 815.2 245.333C820.667 264.267 830.133 318.4 835.333 359.333C839.867 395.333 848 479.867 848 490.933C848 494.533 846.933 499.333 845.467 502.267C843.733 505.6 841.867 514.667 840.133 529.333C837.867 547.467 830 624.533 827.333 655.333C826.933 659.733 824.8 683.067 822.667 707.333C820.533 731.467 817.867 765.733 816.667 783.333C815.6 800.933 814.4 816.533 814 818.133C813.467 820.533 812.133 821.067 803.2 821.867C781.2 823.6 721.2 821.6 718.4 818.933C718 818.4 718.4 807.733 719.333 795.333C720.4 782.8 721.867 761.867 722.667 748.667C730.133 624 735.867 563.867 749.467 468.667C763.733 367.733 780.533 295.467 798.667 257.467C804.4 245.733 811.067 234.667 812.533 234.667C812.667 234.667 812.933 235.467 813.067 236.267ZM750 825.2C771.6 826.267 789.733 826.133 805.067 824.667L813.333 823.867V831.6C813.333 842.4 811.467 844.533 799.733 847.467C792.267 849.467 784.933 850 768 850C744.4 850 729.2 848 721.067 843.867C715.6 841.067 715.467 840.4 716.8 828.533L717.6 821.733L723.067 822.933C726.133 823.6 738.133 824.667 750 825.2ZM1311.33 825.333C1325.33 825.333 1341.73 824.8 1348 824.133C1354.27 823.467 1359.47 823.067 1359.73 823.333C1360 823.467 1360.4 825.867 1360.93 828.4C1362.13 836.533 1360.53 839.867 1354 842.8C1332.67 852.267 1270.27 852.4 1267.47 842.933C1267.07 841.733 1266.4 836.667 1266 831.867L1265.07 823.2L1275.6 824.267C1281.33 824.8 1297.47 825.333 1311.33 825.333Z" fill="black"/>
<path d="M846.8 514.133C846.8 515.6 847.2 516 847.6 514.933C848 514 847.867 512.8 847.467 512.4C847.067 511.867 846.667 512.667 846.8 514.133Z" fill={color1}/>
<path d="M174.5 899L122 894.5L134 746.5L255 750V881L250.5 890L244 896L222.5 899H174.5Z" fill={color1} stroke="#060606" stroke-width="2"/>
<path d="M135.5 732.5L136.5 721.5H142.5L255.5 724.5V746.5L171.5 744.5L139.5 743.5L135.5 741.5V732.5Z" fill={color1} stroke="#060606" stroke-width="2"/>
<path d="M458.5 749.5H395L396.5 868.5V880L400 891L411.5 897.5L445.5 900.5L507.5 897.5L531 893.5L525.5 809.5L519 745.5L458.5 749.5Z" fill={color1} stroke="#060606" stroke-width="2"/>
<path d="M426 724H396L394.5 745L447 746.5L518 742L516.5 721L426 724Z" fill={color1} stroke="#060606" stroke-width="2"/>
<path d="M433.5 409.5H381V471.5L383 496L398 508L428 512.5L451 511L473.5 506L486.5 493.5L489.5 471.5V409.5H433.5Z" fill={color1} stroke="#060606" stroke-width="2"/>
<path d="M382 405.915V386L456.344 386.524H488.493V387.572C488.949 393.596 489.818 404.827 489.975 405.915H490C490 406.031 489.991 406.026 489.975 405.915H382Z" fill={color1}/>
<path d="M382 386V405.915H490C490 407.172 488.995 394.21 488.493 387.572V386.524H456.344L382 386Z" stroke="#060606" stroke-width="2"/>
<path d="M224 176.5L250 148L265.5 223.5L290 288L323 359.5L325.5 388L331 396L339 392.5V427L214 283.5L237.5 253L229.5 250L201 243L197 238.5L212.5 200.5L224 176.5Z" fill={color1} stroke="#060606" stroke-width="2"/>
<path d="M448.5 233L424 183L411 166L397 148L386.5 199L370 254.5L329 359.5V380L331 393.5H334.5L386.5 338L433.5 283L411 252L448.5 240.5V233Z" fill={color1} stroke="#060606" stroke-width="2"/>
<path d="M565 252.5L551 233H550L548.5 238L545 255L527 357L516 453.5L512.5 495.5L514.5 505L527 585.5L536.5 674L544.5 763L549.5 819L553.5 821L567.5 822H598.5L627.5 821L645.5 819L647.5 813.5L645.5 782.5L640 722.5L635.5 670L630 597L620 512.5L612.5 450.5L597 363L583 301L565 252.5Z" fill={color1} stroke="#060606"/>
<path d="M481 201.5L427.5 183.5L445 219.5L451 233.5V241L447.5 244.5L413 253.5L427.5 271.5L436 282.5L387 340L343.5 388L377.5 382.5H489L520.5 384.5L536.5 286.5L541 266.5L547.5 233.5L544 230L481 201.5Z" fill={color1} stroke={color2}/>
<path d="M345 388L366 385H378V477.5L380 495L386.5 505L401.5 512.5L429.5 515H446.5L469 510.5L480.5 505L486 499.5L489 492L490.5 486.5" stroke={color2}/>
<path d="M845 503C833.333 580.333 820 776.5 813.5 844.5L801.5 850L760 854L730 850L713.5 844.5L723 709.5L731 568L753 429.5L767.5 348L787 282L793.5 261L808 233L929 180.5L969.5 141.5L1033.5 138L1102.5 141.5L1145.5 180.5L1272.5 231.5L1287.5 255.5L1299.5 292.5L1312 344L1322 396L1340 521L1353 688L1363 837.5L1348 848.5L1326 851.5H1301.5H1276L1264.5 844L1242 587.5L1226 513.5V598.5L1242 806L1260.5 1141L1258.5 1146.5L1242.5 1151L1207.5 1157L1171.5 1161.5L1140 1165L1114 1166.5H1093H1045L957.5 1165L879 1158.5L842.5 1152.5L826 1149.5L814.5 1145L816 1131L818.5 1071L823 1011.5L836.5 827.5L851.5 542L845 503Z" fill={color1} stroke="#060606" stroke-width="2"/>
<path d="M113.5 299L96.5 235.5L93 238.5L88.5 244L78.5 268.5L65.5 313L53 370.5L46 413L35.5 482.5L23.5 597.5L15 706.5L7.5 818L53.5 823.5L101.5 821.5L112.5 701L122.5 607L135 517L137.5 474.5L135 451.5L128 383.5L113.5 299Z" fill={color1} stroke="#060606"/>
<path d="M492 463L490.5 486.5L488 497L483.5 503.5L480.5 505.5L477.5 507.5L476 508L474 509L471.5 510L464.5 512L449 514L437.5 515.5L411 514L392 509L386 505.5L379 494.5L377 442V385L375.5 383.5L366.5 385L352.5 388L344 389.5V494.5V668.5V901V1078V1163H392.5L438 1160.5L486.5 1156.5L532.5 1148L544 1144V1119.5L541 1055.5L535 953L530.5 899L503 901L465.5 903H438L418 901L410 899L397 892L392.5 872V819V754V721.5H440.5L508.5 718.5L515 717.5L516 715L513.5 696.5L510.5 649.5L508 619.5V545.5L509 508L511 479.5L515.5 431L521 385.5L492 383.5V463Z" fill={color1} stroke={color2}/>
<path d="M194.5 236.5L214 188V187.5L175.5 202.5L133.5 218.5L102.5 231L97.5 235.5L101 243.5L102.5 249L105 257L109 272L119 315L128.5 374L131 387L142 488L144.5 522V626.5L138 717L151 718.5L188 720.5H258.5V722.5V784V862L257 884.5L255.5 889.5L250.5 896.5L246 899.5L211 903L121.5 899.5L109 1075.5L104.5 1142L123.5 1149L198 1159L244 1162.5H290.5H341V1144.5V1107.5V1086V1064V1054V1020.5V1000V989L341.5 925L341 860.5L340.5 754.5V729V702V681.5V670V661V637.5V626V614.5L340.25 596.5L340.5 586.5V577.5L340.25 560.5L340.5 551V543.5V519V480V469V457V445.5V436.5L340 434.5L328 419.5L302.5 390L272 355.5L253.5 335.5L228.5 306.5L214 289.5L211 284V283V282L217 274L228.5 261.5L233.5 255.5L231.5 254.5L228.5 253.5L224.5 252.5L206.5 247.5L195.5 243L194 241.5L194.5 236.5Z" fill={color1} stroke={color2}/>
<path d="M317.72 946.86C317.72 952.306 313.306 956.72 307.86 956.72C302.414 956.72 298 952.306 298 946.86C298 941.414 302.414 937 307.86 937C313.306 937 317.72 941.414 317.72 946.86ZM302.409 946.86C302.409 949.87 304.85 952.311 307.86 952.311C310.87 952.311 313.311 949.87 313.311 946.86C313.311 943.85 310.87 941.409 307.86 941.409C304.85 941.409 302.409 943.85 302.409 946.86Z" fill="black"/>
<path d="M326.72 776.86C326.72 782.306 322.306 786.72 316.86 786.72C311.414 786.72 307 782.306 307 776.86C307 771.414 311.414 767 316.86 767C322.306 767 326.72 771.414 326.72 776.86ZM311.409 776.86C311.409 779.87 313.85 782.311 316.86 782.311C319.87 782.311 322.311 779.87 322.311 776.86C322.311 773.85 319.87 771.409 316.86 771.409C313.85 771.409 311.409 773.85 311.409 776.86Z" fill="black"/>
<path d="M329.72 604.86C329.72 610.306 325.306 614.72 319.86 614.72C314.414 614.72 310 610.306 310 604.86C310 599.414 314.414 595 319.86 595C325.306 595 329.72 599.414 329.72 604.86ZM314.409 604.86C314.409 607.87 316.85 610.311 319.86 610.311C322.87 610.311 325.311 607.87 325.311 604.86C325.311 601.85 322.87 599.409 319.86 599.409C316.85 599.409 314.409 601.85 314.409 604.86Z" fill="black"/>
<path d="M333.72 450.86C333.72 456.306 329.306 460.72 323.86 460.72C318.414 460.72 314 456.306 314 450.86C314 445.414 318.414 441 323.86 441C329.306 441 333.72 445.414 333.72 450.86ZM318.409 450.86C318.409 453.87 320.85 456.311 323.86 456.311C326.87 456.311 329.311 453.87 329.311 450.86C329.311 447.85 326.87 445.409 323.86 445.409C320.85 445.409 318.409 447.85 318.409 450.86Z" fill="black"/>
</svg>
                    {logos.map((logo: any, index: any) => (
                      logo && (
                        <img
                          key={index}
                          src={logo}
                          alt={`Logo ${index + 1}`}
                          className={`absolute pointer-events-none select-none transition-all duration-100 ease-out ${
                            selectedLogoIndex === index 
                              ? 'ring-2 ring-blue-500 ring-opacity-50' 
                              : ''
                          }`}
                          style={{
                            width: `${sizes[index]}px`,
                            height: `${sizes[index]}px`,
                            left: `${200 + positions[index].x - sizes[index] / 2}px`,
                            top: `${250 + positions[index].y - sizes[index] / 2}px`,
                            objectFit: "contain",
                            transform: selectedLogoIndex === index && isDragging 
                              ? 'scale(1.02)' 
                              : 'scale(1)',
                            zIndex: selectedLogoIndex === index ? 10 : 1,
                          }}
                          draggable="false"
                        />
                      )
                    ))}

                    {selectedLogoIndex !== -1 && logos[selectedLogoIndex] && (
                      <div className="absolute bottom-6 left-4 text-xs text-gray-500 bg-white bg-opacity-90 px-3 py-2 rounded-lg shadow-sm">
                        <div>Click logo to select • Drag to move • Scroll to resize</div>
                        <div className="text-blue-600 font-medium">
                          Logo {selectedLogoIndex + 1} selected (Size: {sizes[selectedLogoIndex]}px)
                        </div>
                      </div>
                    )}
                    {selectedLogoIndex !== -1 && logos[selectedLogoIndex] && (
                      <Slider onValueChange={(val)=>{
                        handleSizeChange(val[0])
                      }} className="absolute bottom-2" defaultValue={[33]} max={100} step={1} />
                    )}
                  </div>
                </div>
              </div>
            </div>
          </div>

          <canvas ref={canvasRef} className="hidden" />
        </div>
      </div>
    </>
  );
}